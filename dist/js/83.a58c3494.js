"use strict";(self["webpackChunkrtbooks"]=self["webpackChunkrtbooks"]||[]).push([[83],{3405:function(t,e,a){a.d(e,{Z:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",[e("el-menu",{staticClass:"el-menu",attrs:{mode:"horizontal"}},[e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[t._v("切换语言")]),e("el-menu-item",{attrs:{index:"2-1"}},[t._v("英语")]),e("el-menu-item",{attrs:{index:"2-2"}},[t._v("法语")]),e("el-menu-item",{attrs:{index:"2-3"}},[t._v("德语")]),e("el-menu-item",{attrs:{index:"2-3"}},[t._v("日语")])],2),e("el-menu-item",{attrs:{index:"0"},on:{click:t.re}},[t._v("rt-books")]),e("el-menu-item",{attrs:{index:"2"}},[t._v("玄幻")]),e("el-menu-item",{attrs:{index:"3"}},[t._v("都市")]),e("el-menu-item",{attrs:{index:"4"}},[t._v("仙侠")]),e("el-menu-item",{attrs:{index:"5"}},[t._v("历史")]),e("el-menu-item",{attrs:{index:"6"}},[t._v("悬疑")]),e("el-menu-item",{attrs:{index:"7"}},[t._v("推理")]),e("el-menu-item",{attrs:{index:"8"}},[t._v("言情")]),e("el-menu-item",{attrs:{index:"9"}},[t._v("更多")]),e("el-menu-item",{attrs:{index:"10"},on:{click:t.back}},[t._v("退出登录")])],1)],1)},i=[],s=a(8291),l={name:"top",data(){return{input:""}},methods:{back(){const t="/api/user/logout";s.Z["delete"](t).then((t=>{alert(t.data.msg),200==t.data.code&&this.$router.push("/")}))},re(){this.$router.push("/reader")}}},r=l,n=a(1001),d=(0,n.Z)(r,o,i,!1,null,null,null),c=d.exports},4683:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var o=function(){var t=this,e=t._self._c;return e("div",[e("top"),e("center"),e("foot")],1)},i=[],s=a(7378),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bc"},[e("div",{attrs:{id:"head"}},[e("div",{attrs:{id:"headl"}},[e("img",{attrs:{src:this.cover}})]),e("div",{attrs:{id:"headr"}},[e("ul",[e("li",[t._v("书名:《"+t._s(t.bookname)+"》")]),e("li",[t._v("作者:"+t._s(t.bookauthor))]),e("li",{staticClass:"intro"},[t._v("简介:"+t._s(t.bookintro))]),e("li",[e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.statread}},[t._v("点击阅读")]),e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.attentionauthor()}}},[t._v("关注作者")]),e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.showdialog}},[t._v("加入书架")]),e("el-dialog",{attrs:{title:"选择收藏夹",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[t._l(t.collect,(function(a,o){return e("span",{key:o,staticClass:"collects"},[e("el-radio",{attrs:{label:a},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(a))])],1)})),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消 收 藏")]),e("el-button",{attrs:{type:"primary"},on:{click:t.collectbook}},[t._v("确 定 收 藏")])],1)],2)],1)])])]),e("div",{staticClass:"center"},[e("div",{staticClass:"title",attrs:{href:"#"}},[t._v("目录")]),e("div",{staticClass:"content"},t._l(t.list,(function(a,o){return e("li",{key:o,on:{click:function(e){return t.read(o+1)}}},[t._v(" "+t._s(a)+" ")])})),0)]),e("div",{staticClass:"comment"},[e("div",{staticClass:"title"},[t._v("粉丝互动")]),e("el-table",{staticStyle:{width:"80%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{prop:"user_name",label:"用户",width:"180"}}),e("el-table-column",{attrs:{prop:"barrage",label:"评论"}}),e("el-table-column",{attrs:{prop:"time",label:"时间"}})],1),e("el-input",{staticClass:"sendtext",attrs:{type:"text",rows:2,placeholder:"发表你的评论"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),e("el-button",{staticClass:"send",attrs:{type:"primary",plain:""},on:{click:t.send}},[t._v("点击发送")])],1)])},r=[],n=a(5410),d=a.n(n),c=a(8291),u={data(){return{tableData:[{}],textarea:"",bookname:"",bookauthor:"",list:"[]",bookintro:"",bookid:"",cover:"",dialogVisible:!1,collect:[],radio:"",author_id:0}},methods:{statread(){sessionStorage.setItem("bookno",1),this.$router.push("/readbook")},read(t){sessionStorage.setItem("bookno",t),this.$router.push("/readbook")},send(){var t={barrage:this.textarea},e=sessionStorage.getItem("bookid");c.Z.post("/api/user/read_book/introduce/"+e,d().stringify(t)).then((t=>{200==t.data.code?(alert("发送成功"),this.textarea="",c.Z.get("/api/user/read_book/introduce/"+e).then((t=>{this.bookauthor=t.data.author_name,this.bookintro=t.data.book_describe,this.bookname=t.data.book_name,this.list=t.data.content_list,this.cover=t.data.cover_path,this.tableData=t.data.barrages}))):alert("请登录后再发送评论哦~")}))},handleClose(t){this.$confirm("确认关闭？").then((e=>{t()})).catch((t=>{}))},showcollect(){c.Z.get("/api/user/get_collection_lib").then((t=>{console.log(t.data),200==t.data.code&&(this.collect=t.data.collections)}))},showdialog(){this.dialogVisible=!0,this.showcollect()},collectbook(){console.log(this.radio,typeof this.radio),this.dialogVisible=!1,c.Z.post("/api/user/collect/"+this.bookid+"/"+this.radio).then((t=>{200==t.data.code?alert("收藏成功"):alert("已经在收藏夹了不要重复收藏哦")}))},attentionauthor(){c.Z.get("/api/user/follow_author/"+this.author_id).then((t=>{console.log(t.data),alert(t.data.msg)}))}},mounted(){this.bookid=sessionStorage.getItem("bookid"),c.Z.get("/api/user/read_book/introduce/"+this.bookid).then((t=>{console.log(t.data),this.bookauthor=t.data.author_name,this.bookintro=t.data.book_describe,this.bookname=t.data.book_name,this.list=t.data.content_list,this.cover=t.data.cover_path,this.tableData=t.data.barrages,this.author_id=t.data.author_id}))}},h=u,b=a(1001),m=(0,b.Z)(h,l,r,!1,null,"4e7513fa",null),_=m.exports,p=a(3405),v={components:{top:p.Z,center:_,foot:s.Z}},k=v,g=(0,b.Z)(k,o,i,!1,null,null,null),f=g.exports}}]);
//# sourceMappingURL=83.a58c3494.js.map