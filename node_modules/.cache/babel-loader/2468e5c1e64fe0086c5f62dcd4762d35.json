{"ast":null,"code":"import request from \"@/request\";\nexport default {\n  data() {\n    return {\n      books: [{}],\n      dialogVisible: false,\n      collect: [],\n      radio: \"\"\n    };\n  },\n\n  methods: {\n    statread() {\n      sessionStorage.setItem(\"bookno\", 1);\n      this.$router.push(\"/readbook\");\n    },\n\n    handleClose(done) {\n      this.$confirm(\"确认关闭？\").then(_ => {\n        done();\n      }).catch(_ => {});\n    },\n\n    showcollect() {\n      request.get(\"/api/user/get_collection_lib\").then(res => {\n        console.log(res.data);\n\n        if (res.data.code == 200) {\n          this.collect = res.data.collections;\n        }\n      });\n    },\n\n    showdialog() {\n      this.dialogVisible = true;\n      this.showcollect();\n    },\n\n    collectbook() {\n      console.log(this.radio, typeof this.radio);\n      this.dialogVisible = false;\n      request.post(\"/api/user/collect/\" + this.bookid + \"/\" + this.radio).then(res => {\n        if (res.data.code == 200) {\n          alert(\"收藏成功\");\n        } else {\n          alert(\"已经在收藏夹了不要重复收藏哦\");\n        }\n      });\n    }\n\n  },\n\n  mounted() {},\n\n  create() {\n    var data = {\n      book_name: sessionStorage.getItem(\"searchcontent\")\n    };\n    request.post(\"/api/user/book/search\", qs.stringify(data)).then(res => {\n      console.log(res.data);\n      this.books = res.data.books;\n    });\n  }\n\n};","map":{"version":3,"mappings":"AAiDA;AACA;EACAA;IACA;MACAC,WADA;MAEAC,oBAFA;MAGAC,WAHA;MAIAC;IAJA;EAMA,CARA;;EASAC;IACAC;MACAC;MACA;IACA,CAJA;;IAKAC;MACA,uBACAC,IADA,CACAC;QACAC;MACA,CAHA,EAIAC,KAJA,CAIAF,OAJA;IAKA,CAXA;;IAYAG;MACAC;QACAC;;QACA;UACA;QACA;MACA,CALA;IAMA,CAnBA;;IAoBAC;MACA;MACA;IACA,CAvBA;;IAwBAC;MACAF;MACA;MACAD,QACAI,IADA,CACA,qDADA,EAEAT,IAFA,CAEAU;QACA;UACAC;QACA,CAFA,MAEA;UACAA;QACA;MACA,CARA;IASA;;EApCA,CATA;;EA+CAC,YA/CA;;EAgDAC;IACA;MAAAC;IAAA;IACAT;MACAC;MACA;IACA,CAHA;EAIA;;AAtDA","names":["data","books","dialogVisible","collect","radio","methods","statread","sessionStorage","handleClose","then","_","done","catch","showcollect","request","console","showdialog","collectbook","post","res","alert","mounted","create","book_name"],"sourceRoot":"src/components/read","sources":["searchbook.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"head\" v-for=\"(item, index) in books\" :key=\"index\">\r\n      <div id=\"headl\"><img :src=\"item.cover_path\" /></div>\r\n      <div id=\"headr\">\r\n        <ul>\r\n          <li>书名:《{{ item.book_name }}》</li>\r\n          <li>作者:{{ item.author_name }}</li>\r\n          <li class=\"intro\">简介:{{ book.desc }}</li>\r\n          <li>\r\n            <el-button type=\"primary\" plain @click=\"statread\"\r\n              >点击阅读</el-button\r\n            >\r\n            <el-button type=\"primary\" plain>关注作者</el-button>\r\n            <el-button type=\"primary\" @click=\"showdialog\">加入书架</el-button>\r\n\r\n            <el-dialog\r\n              title=\"选择收藏夹\"\r\n              :visible.sync=\"dialogVisible\"\r\n              width=\"30%\"\r\n              :before-close=\"handleClose\"\r\n            >\r\n              <span\r\n                v-for=\"(item, index) in collect\"\r\n                :key=\"index\"\r\n                class=\"collects\"\r\n              >\r\n                <el-radio v-model=\"radio\" :label=\"item\">{{\r\n                  item\r\n                }}</el-radio></span\r\n              >\r\n\r\n              <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogVisible = false\"\r\n                  >取 消 收 藏</el-button\r\n                >\r\n                <el-button type=\"primary\" @click=\"collectbook\"\r\n                  >确 定 收 藏</el-button\r\n                >\r\n              </span>\r\n            </el-dialog>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/request\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      books: [{}],\r\n      dialogVisible: false,\r\n      collect: [],\r\n      radio: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    statread() {\r\n      sessionStorage.setItem(\"bookno\", 1);\r\n      this.$router.push(\"/readbook\");\r\n    },\r\n    handleClose(done) {\r\n      this.$confirm(\"确认关闭？\")\r\n        .then((_) => {\r\n          done();\r\n        })\r\n        .catch((_) => {});\r\n    },\r\n    showcollect() {\r\n      request.get(\"/api/user/get_collection_lib\").then((res) => {\r\n        console.log(res.data);\r\n        if (res.data.code == 200) {\r\n          this.collect = res.data.collections;\r\n        }\r\n      });\r\n    },\r\n    showdialog() {\r\n      this.dialogVisible = true;\r\n      this.showcollect();\r\n    },\r\n    collectbook() {\r\n      console.log(this.radio, typeof this.radio);\r\n      this.dialogVisible = false;\r\n      request\r\n        .post(\"/api/user/collect/\" + this.bookid + \"/\" + this.radio)\r\n        .then((res) => {\r\n          if (res.data.code == 200) {\r\n            alert(\"收藏成功\");\r\n          } else {\r\n            alert(\"已经在收藏夹了不要重复收藏哦\");\r\n          }\r\n        });\r\n    },\r\n  },\r\n  mounted() {},\r\n  create() {\r\n    var data = { book_name: sessionStorage.getItem(\"searchcontent\") };\r\n    request.post(\"/api/user/book/search\", qs.stringify(data)).then((res) => {\r\n      console.log(res.data);\r\n      this.books = res.data.books;\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.intro {\r\n  overflow: hidden;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 6;\r\n  -webkit-box-orient: vertical;\r\n  text-overflow: ellipsis;\r\n}\r\nimg {\r\n  width: 200px;\r\n  height: 200px;\r\n}\r\n#head {\r\n  margin-top: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 40px;\r\n  font-size: 15px;\r\n}\r\n#headl {\r\n  width: 300px;\r\n}\r\n#headr {\r\n  width: 500px;\r\n  font-family: \"Courier New\", Courier, monospace;\r\n  font-size: 15px;\r\n}\r\n#headr .el-button {\r\n  width: 100px;\r\n  height: 40px;\r\n}\r\n#head li {\r\n  margin-top: 20px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}