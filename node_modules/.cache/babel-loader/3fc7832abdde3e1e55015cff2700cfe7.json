{"ast":null,"code":"import axios from \"axios\";\nimport qs from \"qs\";\nexport default {\n  data() {\n    return {\n      tableData: [{\n        user: \"猫咪酱\",\n        comment: \"作者写的好好看啊期待下一次更新\"\n      }, {\n        user: \"猫咪酱\",\n        comment: \"作者写的好好看啊期待下一次更新\"\n      }, {\n        user: \"猫咪酱\",\n        comment: \"作者写的好好看啊期待下一次更新\"\n      }, {\n        user: \"猫咪酱\",\n        comment: \"作者写的好好看啊期待下一次更新\"\n      }, {\n        user: \"猫咪酱\",\n        comment: \"作者写的好好看啊期待下一次更新\"\n      }, {\n        user: \"猫咪酱\",\n        comment: \"作者写的好好看啊期待下一次更新\"\n      }, {\n        user: \"猫咪酱\",\n        comment: \"作者写的好好看啊期待下一次更新\"\n      }],\n      textarea: \"\",\n      bookname: \"\",\n      bookauthor: \"\",\n      list: \"[]\",\n      bookintro: \"\",\n      bookid: \"\"\n    };\n  },\n\n  methods: {\n    read() {\n      let date = new Date();\n      let year = date.getFullYear();\n      let month = date.getMonth() + 1;\n      let day = date.getDate();\n      let h = date.getHours();\n      let m = date.getMinutes();\n      let s = date.getSeconds();\n      let time = year + \"年\" + month + \"月\" + day + \"日\" + h + \"时\" + m + \"分\" + s + \"秒\";\n      var data = {\n        user_id: sessionStorage.getItem(\"id\"),\n        time: time\n      };\n      axios.post(\"http://localhost:5000/api/user/read_book/start_read/\" + this.bookid + \"/\" + 1, qs.stringify(data)).then(res => {\n        setTimeout(() => {\n          this.$bus.$emit(\"read\", res.data);\n        }, 1000);\n        this.$router.push(\"/readbook\");\n      });\n    }\n\n  },\n\n  mounted() {\n    this.$bus.$on(\"introduce\", intro => {\n      this.bookauthor = intro.author_name;\n      this.bookintro = intro.book_describe;\n      this.bookname = intro.book_name;\n      this.list = intro.content_list;\n    });\n    this.$bus.$on(\"bookid\", id => {\n      this.bookid = id;\n      this.$store.commit(\"bookid\", id);\n    });\n  }\n\n};","map":{"version":3,"mappings":"AAiDA;AACA;AACA;EACAA;IACA;MACAC,YACA;QACAC,WADA;QAEAC;MAFA,CADA,EAKA;QACAD,WADA;QAEAC;MAFA,CALA,EASA;QACAD,WADA;QAEAC;MAFA,CATA,EAaA;QACAD,WADA;QAEAC;MAFA,CAbA,EAiBA;QACAD,WADA;QAEAC;MAFA,CAjBA,EAqBA;QACAD,WADA;QAEAC;MAFA,CArBA,EAyBA;QACAD,WADA;QAEAC;MAFA,CAzBA,CADA;MA+BAC,YA/BA;MAgCAC,YAhCA;MAiCAC,cAjCA;MAkCAC,UAlCA;MAmCAC,aAnCA;MAoCAC;IApCA;EAsCA,CAxCA;;EAyCAC;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,WACAC,OACA,GADA,GAEAC,KAFA,GAGA,GAHA,GAIAC,GAJA,GAKA,GALA,GAMAC,CANA,GAOA,GAPA,GAQAC,CARA,GASA,GATA,GAUAC,CAVA,GAWA,GAZA;MAaA;QACAC,qCADA;QAEAC;MAFA;MAIAC,MACAC,IADA,CAEA,yDACA,WADA,GAEA,GAFA,GAGA,CALA,EAMAC,kBANA,EAQAC,IARA,CAQAC;QACAC;UACA;QACA,CAFA,EAEA,IAFA;QAGA;MACA,CAbA;IAcA;;EAxCA,CAzCA;;EAmFAC;IACA;MACA;MACA;MACA;MACA;IACA,CALA;IAMA;MACA;MACA;IACA,CAHA;EAIA;;AA9FA","names":["data","tableData","user","comment","textarea","bookname","bookauthor","list","bookintro","bookid","methods","read","year","month","day","h","m","s","user_id","time","axios","post","qs","then","res","setTimeout","mounted"],"sourceRoot":"src/components/read","sources":["center.vue"],"sourcesContent":["<template>\r\n  <div class=\"all\">\r\n    <div id=\"head\">\r\n      <div id=\"headl\"><img src=\"@/assets/book/book_13.jpg\" /></div>\r\n      <div id=\"headr\">\r\n        <ul>\r\n          <li>书名:《{{ bookname }}》</li>\r\n          <li>作者:{{ bookauthor }}</li>\r\n          <li class=\"intro\">简介:{{ bookintro }}</li>\r\n          <li>\r\n            <el-button type=\"primary\" plain @click=\"read\">点击阅读</el-button>\r\n            <el-button type=\"primary\" plain>加入书架</el-button>\r\n            <el-button type=\"primary\" plain>投票互动</el-button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"center\">\r\n      <div href=\"#\" class=\"title\">目录</div>\r\n      <div class=\"content\">\r\n        <li v-for=\"(item, index) in list\" :key=\"index\">\r\n          {{ item }}\r\n        </li>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"comment\">\r\n      <div class=\"title\">粉丝互动</div>\r\n      <el-table :data=\"tableData\" border style=\"width: 100%\">\r\n        <el-table-column prop=\"user\" label=\"用户\" width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"comment\" label=\"评论\" width=\"600\">\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-input\r\n        type=\"textarea\"\r\n        :rows=\"2\"\r\n        placeholder=\"发表你的评论\"\r\n        v-model=\"textarea\"\r\n        class=\"sendtext\"\r\n      >\r\n      </el-input>\r\n      <el-button type=\"primary\" plain>点击发送</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport qs from \"qs\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [\r\n        {\r\n          user: \"猫咪酱\",\r\n          comment: \"作者写的好好看啊期待下一次更新\",\r\n        },\r\n        {\r\n          user: \"猫咪酱\",\r\n          comment: \"作者写的好好看啊期待下一次更新\",\r\n        },\r\n        {\r\n          user: \"猫咪酱\",\r\n          comment: \"作者写的好好看啊期待下一次更新\",\r\n        },\r\n        {\r\n          user: \"猫咪酱\",\r\n          comment: \"作者写的好好看啊期待下一次更新\",\r\n        },\r\n        {\r\n          user: \"猫咪酱\",\r\n          comment: \"作者写的好好看啊期待下一次更新\",\r\n        },\r\n        {\r\n          user: \"猫咪酱\",\r\n          comment: \"作者写的好好看啊期待下一次更新\",\r\n        },\r\n        {\r\n          user: \"猫咪酱\",\r\n          comment: \"作者写的好好看啊期待下一次更新\",\r\n        },\r\n      ],\r\n      textarea: \"\",\r\n      bookname: \"\",\r\n      bookauthor: \"\",\r\n      list: \"[]\",\r\n      bookintro: \"\",\r\n      bookid: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    read() {\r\n      let date = new Date();\r\n      let year = date.getFullYear();\r\n      let month = date.getMonth() + 1;\r\n      let day = date.getDate();\r\n      let h = date.getHours();\r\n      let m = date.getMinutes();\r\n      let s = date.getSeconds();\r\n      let time =\r\n        year +\r\n        \"年\" +\r\n        month +\r\n        \"月\" +\r\n        day +\r\n        \"日\" +\r\n        h +\r\n        \"时\" +\r\n        m +\r\n        \"分\" +\r\n        s +\r\n        \"秒\";\r\n      var data = {\r\n        user_id: sessionStorage.getItem(\"id\"),\r\n        time: time,\r\n      };\r\n      axios\r\n        .post(\r\n          \"http://localhost:5000/api/user/read_book/start_read/\" +\r\n            this.bookid +\r\n            \"/\" +\r\n            1,\r\n          qs.stringify(data)\r\n        )\r\n        .then((res) => {\r\n          setTimeout(() => {\r\n            this.$bus.$emit(\"read\", res.data);\r\n          }, 1000);\r\n          this.$router.push(\"/readbook\");\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$bus.$on(\"introduce\", (intro) => {\r\n      this.bookauthor = intro.author_name;\r\n      this.bookintro = intro.book_describe;\r\n      this.bookname = intro.book_name;\r\n      this.list = intro.content_list;\r\n    });\r\n    this.$bus.$on(\"bookid\", (id) => {\r\n      this.bookid = id;\r\n      this.$store.commit(\"bookid\", id);\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.all {\r\n  width: 80vw;\r\n  margin: 0 auto;\r\n  background-color: honeydew;\r\n  border: 1px solid black;\r\n}\r\n.intro {\r\n  overflow: hidden;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 6;\r\n  -webkit-box-orient: vertical;\r\n  text-overflow: ellipsis;\r\n}\r\nimg {\r\n  width: 200px;\r\n  height: 200px;\r\n}\r\n#head {\r\n  margin-top: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 40px;\r\n}\r\n#headl {\r\n  width: 300px;\r\n}\r\n#headr {\r\n  width: 500px;\r\n}\r\n#headr .el-button {\r\n  width: 100px;\r\n  height: 40px;\r\n}\r\n#head li {\r\n  margin-top: 20px;\r\n}\r\n.title {\r\n  letter-spacing: 20px;\r\n  font-size: 25px;\r\n  margin-bottom: 20px;\r\n  margin-top: 20px;\r\n  font-family: \"Times New Roman\", Times, serif;\r\n}\r\n\r\n.content li {\r\n  display: inline-block;\r\n  width: 500px;\r\n  margin-bottom: 20px;\r\n  margin-left: 50px;\r\n}\r\n.comment {\r\n  background-color: aqua;\r\n  margin-bottom: 100px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}