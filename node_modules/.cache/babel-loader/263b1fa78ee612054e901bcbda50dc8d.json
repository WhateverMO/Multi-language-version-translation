{"ast":null,"code":"import request from \"@/request\";\nimport qs from \"qs\";\nexport default {\n  data() {\n    return {\n      books: \"\",\n      collectname: [],\n      collectbooks: []\n    };\n  },\n\n  methods: {\n    cancel(x) {\n      request.post(\"/api/user/del_collect/\" + x).then(res => {\n        alert(res.data.msg);\n      }); //拿阅读记录\n\n      request.get(\"/api/user/get_collection\").then(res => {\n        this.books = res.data.collect_books;\n        this.$forceUpdate();\n      }); //拿阅读记录\n    },\n\n    buider() {\n      this.$prompt(\"请输入要创建的收藏夹名字\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\"\n      }).then(({\n        value\n      }) => {\n        var data = {\n          libname: value\n        };\n        request.post(\"/api/user/create_collection\", qs.stringify(data)).then(res => {\n          if (res.data.code == 200) {\n            this.$message({\n              type: \"success\",\n              message: \"收藏夹创建成功\"\n            });\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: \"info\",\n          message: \"取消输入\"\n        });\n      });\n    },\n\n    collectbook(name) {\n      request.get(\"/api/user/get_collection/\" + name).then(res => {\n        if (res.data.code == 200) {\n          this.collectbooks = res.data.collection_book_list;\n          console.log(this.collectbooks);\n        }\n\n        console.log(res.data);\n      });\n    }\n\n  },\n\n  mounted() {\n    request.get(\"/api/user/get_collection_lib\").then(res => {\n      console.log(res.data);\n      this.collectname = res.data.collections;\n    }); //获取所有收藏夹名字\n\n    console.log(this.collectname); // request\n    //   .get(\"/api/user/get_collection/\" + this.collectname[1])\n    //   .then((res) => {\n    //     console.log(res.data);\n    //   });\n  }\n\n};","map":{"version":3,"mappings":"AAiCA;AACA;AACA;EACAA;IACA;MACAC,SADA;MAEAC,eAFA;MAGAC;IAHA;EAKA,CAPA;;EAQAC;IACAC;MACAC;QACAC;MACA,CAFA,EADA,CAGA;;MACAD;QACA;QACA;MACA,CAHA,EAJA,CAOA;IACA,CATA;;IAUAE;MACA;QACAC,uBADA;QAEAC;MAFA,GAIAC,IAJA,CAIA;QAAAC;MAAA;QACA;UACAC;QADA;QAGAP,QACAQ,IADA,CACA,6BADA,EACAC,kBADA,EAEAJ,IAFA,CAEAK;UACA;YACA;cACAC,eADA;cAEAC;YAFA;UAIA;QACA,CATA;MAUA,CAlBA,EAmBAC,KAnBA,CAmBA;QACA;UACAF,YADA;UAEAC;QAFA;MAIA,CAxBA;IAyBA,CApCA;;IAqCAE;MACAd;QACA;UACA;UACAe;QACA;;QAEAA;MACA,CAPA;IAQA;;EA9CA,CARA;;EAwDAC;IACAhB;MACAe;MACA;IACA,CAHA,EADA,CAIA;;IACAA,8BALA,CAMA;IACA;IACA;IACA;IACA;EACA;;AAnEA","names":["data","books","collectname","collectbooks","methods","cancel","request","alert","buider","confirmButtonText","cancelButtonText","then","value","libname","post","qs","res","type","message","catch","collectbook","console","mounted"],"sourceRoot":"src/components/information","sources":["collect.vue"],"sourcesContent":["<template>\r\n  <div class=\"all\">\r\n    <div class=\"list\">\r\n      <ul class=\"title\">\r\n        我的收藏夹\r\n      </ul>\r\n      <ul\r\n        v-for=\"(name, index) in collectname\"\r\n        :key=\"index\"\r\n        @click=\"collectbook(name)\"\r\n      >\r\n        <li>{{ name }} <i class=\"el-icon-minus\"></i></li>\r\n      </ul>\r\n      <ul>\r\n        <el-button type=\"text\" @click=\"buider\">创建收藏夹</el-button>\r\n      </ul>\r\n    </div>\r\n    <div class=\"content\">\r\n      <ul class=\"title\">\r\n        我收藏的图书\r\n      </ul>\r\n      <ul\r\n        v-for=\"(item, index) in this.collectbooks\"\r\n        :key=\"index\"\r\n        @click=\"collectbook(item.book_id)\"\r\n      >\r\n        <li>{{ item.book_name }}___{{ item.desc }}</li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/request\";\r\nimport qs from \"qs\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      books: \"\",\r\n      collectname: [],\r\n      collectbooks: [],\r\n    };\r\n  },\r\n  methods: {\r\n    cancel(x) {\r\n      request.post(\"/api/user/del_collect/\" + x).then((res) => {\r\n        alert(res.data.msg);\r\n      }); //拿阅读记录\r\n      request.get(\"/api/user/get_collection\").then((res) => {\r\n        this.books = res.data.collect_books;\r\n        this.$forceUpdate();\r\n      }); //拿阅读记录\r\n    },\r\n    buider() {\r\n      this.$prompt(\"请输入要创建的收藏夹名字\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n      })\r\n        .then(({ value }) => {\r\n          var data = {\r\n            libname: value,\r\n          };\r\n          request\r\n            .post(\"/api/user/create_collection\", qs.stringify(data))\r\n            .then((res) => {\r\n              if (res.data.code == 200) {\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"收藏夹创建成功\",\r\n                });\r\n              }\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"取消输入\",\r\n          });\r\n        });\r\n    },\r\n    collectbook(name) {\r\n      request.get(\"/api/user/get_collection/\" + name).then((res) => {\r\n        if (res.data.code == 200) {\r\n          this.collectbooks = res.data.collection_book_list;\r\n          console.log(this.collectbooks);\r\n        }\r\n\r\n        console.log(res.data);\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    request.get(\"/api/user/get_collection_lib\").then((res) => {\r\n      console.log(res.data);\r\n      this.collectname = res.data.collections;\r\n    }); //获取所有收藏夹名字\r\n    console.log(this.collectname);\r\n    // request\r\n    //   .get(\"/api/user/get_collection/\" + this.collectname[1])\r\n    //   .then((res) => {\r\n    //     console.log(res.data);\r\n    //   });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nli {\r\n  padding: 20px;\r\n  font-family: \"Times New Roman\", Times, serif;\r\n  font-size: 20px;\r\n}\r\nli:hover .el-icon-minus {\r\n  cursor: pointer;\r\n  background-color: rgb(243, 240, 235);\r\n  color: red;\r\n  display: inline-block;\r\n}\r\n.list {\r\n  margin-left: 20vw;\r\n  margin-top: 10vh;\r\n  float: left;\r\n}\r\n.title {\r\n  letter-spacing: 20px;\r\n  font-size: 25px;\r\n  margin-bottom: 20px;\r\n  margin-top: 20px;\r\n  font-family: \"Times New Roman\", Times, serif;\r\n  margin-left: 20px;\r\n  color: rgb(17, 155, 206);\r\n}\r\n.content {\r\n  float: left;\r\n  margin-left: 10vw;\r\n  margin-top: 10vh;\r\n}\r\nel-icon-minus {\r\n  display: none;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}