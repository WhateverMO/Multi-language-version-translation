{"ast":null,"code":"import qs from \"qs\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      age: [{\n        value: \"选项1\",\n        label: \"18\"\n      }, {\n        value: \"选项2\",\n        label: \"19\"\n      }, {\n        value: \"选项3\",\n        label: \"20\"\n      }, {\n        value: \"选项4\",\n        label: \"21\"\n      }, {\n        value: \"选项5\",\n        label: \"22\"\n      }],\n      area: [{\n        value: \"选项1\",\n        label: \"重庆\"\n      }, {\n        value: \"选项2\",\n        label: \"四川\"\n      }, {\n        value: \"选项3\",\n        label: \"云南\"\n      }, {\n        value: \"选项4\",\n        label: \"湖南\"\n      }, {\n        value: \"选项5\",\n        label: \"北京\"\n      }],\n      radio: \"\",\n      input: \"\",\n      textarea: \"\",\n      old: \"\",\n      place: \"\",\n      imageUrl: \"\"\n    };\n  },\n\n  methods: {\n    handleAvatarSuccess(res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw);\n      console.log(res, file);\n    },\n\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === \"image/jpeg\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\n      }\n\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n\n      return isJPG && isLt2M;\n    },\n\n    checkinfo() {\n      var data = {\n        username: this.input,\n        gender: this.radio,\n        area: this.$refs.place.selected.label,\n        user_describe: this.textarea,\n        user_age: this.$refs.old.selected.label\n      };\n      const path = \"http://localhost:5000/api/user/information/modification\";\n      axios.post(path, qs.stringify(data)).then(res => {\n        alert(res.data.msg);\n\n        if (res.data.code == 200) {\n          this.$store.commit(\"name\", res.data.username);\n          this.$store.commit(\"sex\", res.data.user_gender);\n          this.$store.commit(\"place\", res.data.user_area);\n          this.$store.commit(\"intro\", res.data.user_describe);\n          this.$store.commit(\"age\", res.data.user_age);\n          this.$router.push(\"/readerinformation\");\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAmEA;AACA;AACA;EACAA;IACA;MACAC,MACA;QACAC,YADA;QAEAC;MAFA,CADA,EAKA;QACAD,YADA;QAEAC;MAFA,CALA,EASA;QACAD,YADA;QAEAC;MAFA,CATA,EAaA;QACAD,YADA;QAEAC;MAFA,CAbA,EAiBA;QACAD,YADA;QAEAC;MAFA,CAjBA,CADA;MAuBAC,OACA;QACAF,YADA;QAEAC;MAFA,CADA,EAKA;QACAD,YADA;QAEAC;MAFA,CALA,EASA;QACAD,YADA;QAEAC;MAFA,CATA,EAaA;QACAD,YADA;QAEAC;MAFA,CAbA,EAiBA;QACAD,YADA;QAEAC;MAFA,CAjBA,CAvBA;MA6CAE,SA7CA;MA8CAC,SA9CA;MA+CAC,YA/CA;MAgDAC,OAhDA;MAiDAC,SAjDA;MAkDAC;IAlDA;EAoDA,CAtDA;;EAwDAC;IACAC;MACA;MACAC;IACA,CAJA;;IAKAC;MACA;MACA;;MAEA;QACA;MACA;;MACA;QACA;MACA;;MACA;IACA,CAhBA;;IAkBAC;MACA;QACAC,oBADA;QAEAC,kBAFA;QAGAb,qCAHA;QAIAc,4BAJA;QAKAC;MALA;MAOA;MACAC;QACAC;;QACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;MACA,CAVA;IAWA;;EAtCA;AAxDA","names":["data","age","value","label","area","radio","input","textarea","old","place","imageUrl","methods","handleAvatarSuccess","console","beforeAvatarUpload","checkinfo","username","gender","user_describe","user_age","axios","alert"],"sourceRoot":"src/components/information","sources":["check.vue"],"sourcesContent":["<template>\r\n  <div class=\"all\">\r\n    <ul>\r\n      <el-upload\r\n        class=\"avatar-uploader\"\r\n        action=\"http://localhost:5000/api/user/information/modification/update_avatar\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        :before-upload=\"beforeAvatarUpload\"\r\n      >\r\n        <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n      </el-upload>\r\n    </ul>\r\n\r\n    <ul>\r\n      <li>\r\n        用户名：<el-input\r\n          v-model=\"input\"\r\n          placeholder=\"请输入新的用户名\"\r\n        ></el-input>\r\n      </li>\r\n      <li>\r\n        性别： <el-radio v-model=\"radio\" label=\"男\">男</el-radio>\r\n        <el-radio v-model=\"radio\" label=\"女\">女</el-radio>\r\n      </li>\r\n      <li>\r\n        年龄：<el-select v-model=\"old\" ref=\"old\" placeholder=\"请选择你的年龄\">\r\n          <el-option\r\n            v-for=\"item in age\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </li>\r\n      <li>\r\n        地区：<el-select\r\n          v-model=\"place\"\r\n          ref=\"place\"\r\n          placeholder=\"请选择你所在的地区\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in area\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </li>\r\n      <li>\r\n        个人介绍:<el-input\r\n          type=\"textarea\"\r\n          :rows=\"3\"\r\n          placeholder=\"请输入介绍内容\"\r\n          v-model=\"textarea\"\r\n        >\r\n        </el-input>\r\n      </li>\r\n      <li><el-button type=\"primary\" @click=\"checkinfo\">点击修改</el-button></li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      age: [\r\n        {\r\n          value: \"选项1\",\r\n          label: \"18\",\r\n        },\r\n        {\r\n          value: \"选项2\",\r\n          label: \"19\",\r\n        },\r\n        {\r\n          value: \"选项3\",\r\n          label: \"20\",\r\n        },\r\n        {\r\n          value: \"选项4\",\r\n          label: \"21\",\r\n        },\r\n        {\r\n          value: \"选项5\",\r\n          label: \"22\",\r\n        },\r\n      ],\r\n      area: [\r\n        {\r\n          value: \"选项1\",\r\n          label: \"重庆\",\r\n        },\r\n        {\r\n          value: \"选项2\",\r\n          label: \"四川\",\r\n        },\r\n        {\r\n          value: \"选项3\",\r\n          label: \"云南\",\r\n        },\r\n        {\r\n          value: \"选项4\",\r\n          label: \"湖南\",\r\n        },\r\n        {\r\n          value: \"选项5\",\r\n          label: \"北京\",\r\n        },\r\n      ],\r\n      radio: \"\",\r\n      input: \"\",\r\n      textarea: \"\",\r\n      old: \"\",\r\n      place: \"\",\r\n      imageUrl: \"\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    handleAvatarSuccess(res, file) {\r\n      this.imageUrl = URL.createObjectURL(file.raw);\r\n      console.log(res, file);\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isJPG = file.type === \"image/jpeg\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n\r\n    checkinfo() {\r\n      var data = {\r\n        username: this.input,\r\n        gender: this.radio,\r\n        area: this.$refs.place.selected.label,\r\n        user_describe: this.textarea,\r\n        user_age: this.$refs.old.selected.label,\r\n      };\r\n      const path = \"http://localhost:5000/api/user/information/modification\";\r\n      axios.post(path, qs.stringify(data)).then((res) => {\r\n        alert(res.data.msg);\r\n        if (res.data.code == 200) {\r\n          this.$store.commit(\"name\", res.data.username);\r\n          this.$store.commit(\"sex\", res.data.user_gender);\r\n          this.$store.commit(\"place\", res.data.user_area);\r\n          this.$store.commit(\"intro\", res.data.user_describe);\r\n          this.$store.commit(\"age\", res.data.user_age);\r\n          this.$router.push(\"/readerinformation\");\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.all {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\nul {\r\n  margin-top: 50px;\r\n  margin-left: 50px;\r\n}\r\nul li {\r\n  margin-bottom: 30px;\r\n}\r\n.el-input {\r\n  width: 250px;\r\n}\r\n.el-button {\r\n  margin-left: 5vw;\r\n}\r\n.el-textarea {\r\n  width: 250px;\r\n}\r\n.avatar-uploader {\r\n  cursor: pointer;\r\n  width: 278px;\r\n  height: 278px;\r\n  background-color: rgb(235, 252, 247);\r\n  border: 1px dashed #7a7b7b;\r\n}\r\n.avatar-uploader:hover {\r\n  border: 1px dashed #c93b28;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 48px;\r\n  width: 278px;\r\n  height: 278px;\r\n  line-height: 278px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 278px;\r\n  height: 278px;\r\n  display: block;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}